<html>
  <head>
    <meta charset="UTF-8" />
    <title>Shrimple WebRTC Demo</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="description" content="" />
    <link rel="icon" href="https://fav.farm/🦐" />
  </head>
  <body
    style="
      color: #4c4f69;
      background: #eff1f5;
      max-width: 800px;
      margin: auto;
      padding: 2rem;
    "
  >
    <h1>🦐Shrimple🦐 WebRTC Demo</h1>
    <p>
      WebRTC peer-to-peer connections may not work if one or both users are
      behind a
      <strong>symmetric NAT</strong> (common in some routers and enterprise
      networks). In these cases, a
      <a href="https://webrtc.org/getting-started/turn-server">TURN server</a>
      is required to relay traffic. TURN servers are bandwidth-intensive and
      typically cost money to run.
    </p>
    <pre>My ID: <span class="myId">loading...</span></pre>
    <hr />
    <div style="display: flex; flex-direction: row; flex-wrap: wrap; gap: 2rem">
      <div>
        <div
          style="
            border: 2px solid #4c4f69;
            max-width: 300px;
            position: relative;
          "
        >
          <button
            id="enableVideoAudio"
            style="
              font-weight: bold;
              font-size: 1.25rem;
              position: absolute;
              z-index: 1;
              width: 100%;
              height: 100%;
            "
          >
            👉 1. Enable My Video/Audio
          </button>
          <video id="localVideo" autoplay muted style="width: 100%"></video>
        </div>
        <pre>👆You: <span class="myId">loading...</span></pre>
        <div id="select">
          <label for="videoSource">📹</label>
          <select id="videoSource"></select>
          <br />
          <label for="audioSource">🎤</label>
          <select id="audioSource"></select>
        </div>
      </div>
      <div>
        <div
          style="
            border: 2px solid #4c4f69;
            max-width: 300px;
            position: relative;
          "
        >
          <button
            id="startCall"
            style="
              font-weight: bold;
              font-size: 1.25rem;
              position: absolute;
              z-index: 0;
              width: 100%;
              height: 100%;
            "
          >
            👉 2. Call using their ID
          </button>
          <video
            id="remoteVideo"
            autoplay
            style="
              width: 100%;
              pointer-events: none;
              position: relative;
              z-index: 1;
            "
          ></video>
        </div>
        <pre>👆Them: <span class="peerId">[Get into a call first...]</span></pre>
      </div>
    </div>
    <hr />
    <p><em>What's happening behind the scenes</em></p>
    <pre id="console" style="padding-bottom: 10rem; overflow: auto"></pre>
    <hr />

    <script type="module" src="script.js"></script>
  </body>
</html>
